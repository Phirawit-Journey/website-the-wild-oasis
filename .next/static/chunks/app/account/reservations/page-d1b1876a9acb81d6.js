(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[597],{7336:function(e,t,r){Promise.resolve().then(r.bind(r,1961))},1961:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Z}});var n=r(7437),a=r(8792),i=r(703),s=r(2265);let l=s.forwardRef(function({title:e,titleId:t,...r},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32l8.4-8.4Z"}),s.createElement("path",{d:"M5.25 5.25a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3V13.5a.75.75 0 0 0-1.5 0v5.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5V8.25a1.5 1.5 0 0 1 1.5-1.5h5.25a.75.75 0 0 0 0-1.5H5.25Z"}))});var o=r(2328);function u(e,t){let r=(0,o.Q)(e),n=(0,o.Q)(t),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}var c=r(8620),f=r(6497),d=r(666),m=r(2028),x=r(7836),h=r(4664);let p={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},g=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,b=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,v=/^([+-])(\d{2})(?::?(\d{2}))?$/;function D(e){return e?parseInt(e):1}function N(e){return e&&parseFloat(e.replace(",","."))||0}let y=[31,null,31,30,31,30,31,31,30,31,30,31];function w(e){return e%400==0||e%4==0&&e%100!=0}var M=r(6084),j=r(5890),T=r(1874),C=r(4970);let E=s.forwardRef(function({title:e,titleId:t,...r},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))});var Q=function(){return(0,n.jsx)("div",{className:"spinner-mini"})},F=function(e){let{bookingId:t,onDelete:r}=e,[a,i]=(0,s.useTransition)();return(0,n.jsx)("button",{onClick:function(){confirm("Are you sure you want to delete this reservation?")&&i(()=>r(t))},className:"group flex items-center gap-2 uppercase text-xs font-bold text-primary-300 flex-grow px-3 hover:bg-accent-600 transition-colors hover:text-primary-900",children:a?(0,n.jsx)("span",{className:"mx-auto",children:(0,n.jsx)(Q,{})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E,{className:"h-5 w-5 text-primary-600 group-hover:text-primary-800 transition-colors"}),(0,n.jsx)("span",{className:"mt-1",children:"Delete"})]})})};let H=e=>(function(e,t,r){var n,a,i,s;let l,p,g;let b=(0,x.j)(),v=r?.locale??b.locale??m._,D=u(e,t);if(isNaN(D))throw RangeError("Invalid time value");let N=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:D});D>0?(l=(0,o.Q)(t),p=(0,o.Q)(e)):(l=(0,o.Q)(e),p=(0,o.Q)(t));let y=(n=p,a=l,(s=void 0,e=>{let t=(s?Math[s]:Math.trunc)(e);return 0===t?0:t})((+(0,o.Q)(n)-+(0,o.Q)(a))/1e3)),w=Math.round((y-((0,h.D)(p)-(0,h.D)(l))/1e3)/60);if(w<2){if(r?.includeSeconds){if(y<5)return v.formatDistance("lessThanXSeconds",5,N);if(y<10)return v.formatDistance("lessThanXSeconds",10,N);if(y<20)return v.formatDistance("lessThanXSeconds",20,N);if(y<40)return v.formatDistance("halfAMinute",0,N);else if(y<60)return v.formatDistance("lessThanXMinutes",1,N);else return v.formatDistance("xMinutes",1,N)}return 0===w?v.formatDistance("lessThanXMinutes",1,N):v.formatDistance("xMinutes",w,N)}if(w<45)return v.formatDistance("xMinutes",w,N);if(w<90)return v.formatDistance("aboutXHours",1,N);if(w<c.H_)return v.formatDistance("aboutXHours",Math.round(w/60),N);if(w<2520)return v.formatDistance("xDays",1,N);if(w<c.fH){let e=Math.round(w/c.H_);return v.formatDistance("xDays",e,N)}if(w<2*c.fH)return g=Math.round(w/c.fH),v.formatDistance("aboutXMonths",g,N);if((g=function(e,t){let r;let n=(0,o.Q)(e),a=(0,o.Q)(t),i=u(n,a),s=Math.abs((0,f.T)(n,a));if(s<1)r=0;else{1===n.getMonth()&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*s);let t=u(n,a)===-i;(function(e){let t=(0,o.Q)(e);return+function(e){let t=(0,o.Q)(e);return t.setHours(23,59,59,999),t}(t)==+(0,d.V)(t)})((0,o.Q)(e))&&1===s&&1===u(e,a)&&(t=!1),r=i*(s-Number(t))}return 0===r?0:r}(p,l))<12){let e=Math.round(w/c.fH);return v.formatDistance("xMonths",e,N)}{let e=g%12,t=Math.trunc(g/12);return e<3?v.formatDistance("aboutXYears",t,N):e<9?v.formatDistance("overXYears",t,N):v.formatDistance("almostXYears",t+1,N)}})(function(e,t){let r,n;let a=function(e){let t;let r={},n=e.split(p.dateTimeDelimiter);if(n.length>2)return r;if(/:/.test(n[0])?t=n[0]:(r.date=n[0],t=n[1],p.timeZoneDelimiter.test(r.date)&&(r.date=e.split(p.timeZoneDelimiter)[0],t=e.substr(r.date.length,e.length))),t){let e=p.timezone.exec(t);e?(r.time=t.replace(e[1],""),r.timezone=e[1]):r.time=t}return r}(e);if(a.date){let e=function(e,t){let r=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};let a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:null===i?a:100*i,restDateString:e.slice((n[1]||n[2]).length)}}(a.date,(void 0)??2);r=function(e,t){if(null===t)return new Date(NaN);let r=e.match(g);if(!r)return new Date(NaN);let n=!!r[4],a=D(r[1]),i=D(r[2])-1,s=D(r[3]),l=D(r[4]),o=D(r[5])-1;if(n)return l>=1&&l<=53&&o>=0&&o<=6?function(e,t,r){let n=new Date(0);n.setUTCFullYear(e,0,4);let a=n.getUTCDay()||7;return n.setUTCDate(n.getUTCDate()+((t-1)*7+r+1-a)),n}(t,l,o):new Date(NaN);{let e=new Date(0);return i>=0&&i<=11&&s>=1&&s<=(y[i]||(w(t)?29:28))&&a>=1&&a<=(w(t)?366:365)?(e.setUTCFullYear(t,i,Math.max(a,s)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);let i=r.getTime(),s=0;if(a.time&&isNaN(s=function(e){let t=e.match(b);if(!t)return NaN;let r=N(t[1]),n=N(t[2]),a=N(t[3]);return(24===r?0===n&&0===a:a>=0&&a<60&&n>=0&&n<60&&r>=0&&r<25)?r*c.vh+n*c.yJ+1e3*a:NaN}(a.time)))return new Date(NaN);if(a.timezone){if(isNaN(n=function(e){if("Z"===e)return 0;let t=e.match(v);if(!t)return 0;let r="+"===t[1]?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return a>=0&&a<=59?r*(n*c.vh+a*c.yJ):NaN}(a.timezone)))return new Date(NaN)}else{let e=new Date(i+s),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return new Date(i+s+n)}(e),new Date,{addSuffix:!0}).replace("about ","");var S=function(e){var t;let{booking:r,onDelete:s}=e,{id:o,guestId:u,startDate:c,endDate:f,numNights:d,totalPrice:m,numGuests:x,status:h,created_at:p,cabins:{name:g,image:b}}=r;return(0,n.jsxs)("div",{className:"flex border border-primary-800",children:[(0,n.jsx)("div",{className:"relative h-32 aspect-square",children:(0,n.jsx)(i.default,{src:b,alt:"Cabin ".concat(g),fill:!0,className:"object-cover border-r border-primary-800"})}),(0,n.jsxs)("div",{className:"flex-grow px-6 py-3 flex flex-col",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("h3",{className:"text-xl font-semibold",children:[d," nights in Cabin ",g]}),(0,M.C)(new Date(c))?(0,n.jsx)("span",{className:"bg-yellow-800 text-yellow-200 h-7 px-3 uppercase text-xs font-bold flex items-center rounded-sm",children:"past"}):(0,n.jsx)("span",{className:"bg-green-800 text-green-200 h-7 px-3 uppercase text-xs font-bold flex items-center rounded-sm",children:"upcoming"})]}),(0,n.jsxs)("p",{className:"text-lg text-primary-300",children:[(0,j.WU)(new Date(c),"EEE, MMM dd yyyy")," (",(t=new Date(c),(0,C.K)(t,(0,T.L)(t,Date.now())))?"Today":H(c),") — ",(0,j.WU)(new Date(f),"EEE, MMM dd yyyy")]}),(0,n.jsxs)("div",{className:"flex gap-5 mt-auto items-baseline",children:[(0,n.jsxs)("p",{className:"text-xl font-semibold text-accent-400",children:["$",m]}),(0,n.jsx)("p",{className:"text-primary-300",children:"•"}),(0,n.jsxs)("p",{className:"text-lg text-primary-300",children:[x," guest",x>1&&"s"]}),(0,n.jsxs)("p",{className:"ml-auto text-sm text-primary-400",children:["Booked ",(0,j.WU)(new Date(p),"EEE, MMM dd yyyy, p")]})]})]}),(0,n.jsx)("div",{className:"flex flex-col border-l border-primary-800 w-[100px]",children:(0,M.C)(c)?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.default,{href:"/account/reservations/edit/".concat(o),className:"group flex items-center gap-2 uppercase text-xs font-bold text-primary-300 border-b border-primary-800 flex-grow px-3 hover:bg-accent-600 transition-colors hover:text-primary-900",children:[(0,n.jsx)(l,{className:"h-5 w-5 text-primary-600 group-hover:text-primary-800 transition-colors"}),(0,n.jsx)("span",{className:"mt-1",children:"Edit"})]}),(0,n.jsx)(F,{bookingId:o,onDelete:s})]})})]})},U=r(2527),Z=function(e){let{bookings:t}=e,[r,a]=(0,s.useOptimistic)(t,(e,t)=>e.filter(e=>e.id!==t));async function i(e){a(e),await (0,U.FF)(e)}return(0,n.jsx)("ul",{className:"space-y-6",children:r.map(e=>(0,n.jsx)(S,{booking:e,onDelete:i},e.id))})}},2527:function(e,t,r){"use strict";r.d(t,{FF:function(){return l},NH:function(){return a},TB:function(){return s},sF:function(){return i}}),r(5355);var n=r(3472),a=(0,n.$)("bd43625aad347b7af89e62648689fcb15c113708"),i=(0,n.$)("7f6b87b34fc5114546c6033bf26a784f78c518f4"),s=(0,n.$)("52ec01a533020938bc4860eb0e0af7b9239435c0"),l=(0,n.$)("8a217c6e79090ba30f40bfb72d31e76126e6f9b2");(0,n.$)("1530feff8e7932d9f473cd600032b030ff38219e"),(0,n.$)("849ade5571ba8daf5502e88a2929d64d74f71479")},703:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var n=r(7447),a=r.n(n)},8792:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var n=r(5250),a=r.n(n)},3472:function(e,t,r){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return a}});let n=r(5355);function a(e){let{createServerReference:t}=r(6671);return t(e,n.callServer)}},7447:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getImageProps:function(){return l},default:function(){return o}});let n=r(6921),a=r(8630),i=r(1749),s=n._(r(536)),l=e=>{let{props:t}=(0,a.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}},o=i.Image},6497:function(e,t,r){"use strict";r.d(t,{T:function(){return a}});var n=r(2328);function a(e,t){let r=(0,n.Q)(e),a=(0,n.Q)(t);return 12*(r.getFullYear()-a.getFullYear())+(r.getMonth()-a.getMonth())}},666:function(e,t,r){"use strict";r.d(t,{V:function(){return a}});var n=r(2328);function a(e){let t=(0,n.Q)(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}},6084:function(e,t,r){"use strict";r.d(t,{C:function(){return a}});var n=r(2328);function a(e){return+(0,n.Q)(e)<Date.now()}},4970:function(e,t,r){"use strict";r.d(t,{K:function(){return a}});var n=r(1835);function a(e,t){return+(0,n.b)(e)==+(0,n.b)(t)}}},function(e){e.O(0,[250,749,890,971,69,744],function(){return e(e.s=7336)}),_N_E=e.O()}]);