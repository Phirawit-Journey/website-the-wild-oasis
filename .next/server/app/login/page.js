(()=>{var e={};e.id=626,e.ids=[626],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},58425:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>o.a,__next_app__:()=>b,originalPathname:()=>l,pages:()=>u,routeModule:()=>f,tree:()=>d});var r=i(50482),s=i(69108),a=i(62563),o=i.n(a),n=i(68300),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);i.d(t,c);let d=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,29925)),"/Users/phirawitt./Desktop/ReactJS/ultimate-react-course-main/Finish/21-the-wild-oasis-website/the-wild-oasis-website/app/login/page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(i.bind(i,57575)),"/Users/phirawitt./Desktop/ReactJS/ultimate-react-course-main/Finish/21-the-wild-oasis-website/the-wild-oasis-website/app/layout.js"],error:[()=>Promise.resolve().then(i.bind(i,60826)),"/Users/phirawitt./Desktop/ReactJS/ultimate-react-course-main/Finish/21-the-wild-oasis-website/the-wild-oasis-website/app/error.js"],loading:[()=>Promise.resolve().then(i.bind(i,65016)),"/Users/phirawitt./Desktop/ReactJS/ultimate-react-course-main/Finish/21-the-wild-oasis-website/the-wild-oasis-website/app/loading.js"],"not-found":[()=>Promise.resolve().then(i.bind(i,46178)),"/Users/phirawitt./Desktop/ReactJS/ultimate-react-course-main/Finish/21-the-wild-oasis-website/the-wild-oasis-website/app/not-found.js"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/Users/phirawitt./Desktop/ReactJS/ultimate-react-course-main/Finish/21-the-wild-oasis-website/the-wild-oasis-website/app/login/page.js"],l="/login/page",b={require:i,loadChunk:()=>Promise.resolve()},f=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},35238:(e,t,i)=>{let r={"1530feff8e7932d9f473cd600032b030ff38219e":()=>Promise.resolve().then(i.bind(i,10752)).then(e=>e.updateBooking),"52ec01a533020938bc4860eb0e0af7b9239435c0":()=>Promise.resolve().then(i.bind(i,10752)).then(e=>e.createBooking),"7f6b87b34fc5114546c6033bf26a784f78c518f4":()=>Promise.resolve().then(i.bind(i,10752)).then(e=>e.updateGuest),"849ade5571ba8daf5502e88a2929d64d74f71479":()=>Promise.resolve().then(i.bind(i,10752)).then(e=>e.signInAction),"8a217c6e79090ba30f40bfb72d31e76126e6f9b2":()=>Promise.resolve().then(i.bind(i,10752)).then(e=>e.deleteBooking),bd43625aad347b7af89e62648689fcb15c113708:()=>Promise.resolve().then(i.bind(i,10752)).then(e=>e.signOutAction)};async function s(e,...t){return(await r[e]()).apply(null,t)}e.exports={"1530feff8e7932d9f473cd600032b030ff38219e":s.bind(null,"1530feff8e7932d9f473cd600032b030ff38219e"),"52ec01a533020938bc4860eb0e0af7b9239435c0":s.bind(null,"52ec01a533020938bc4860eb0e0af7b9239435c0"),"7f6b87b34fc5114546c6033bf26a784f78c518f4":s.bind(null,"7f6b87b34fc5114546c6033bf26a784f78c518f4"),"849ade5571ba8daf5502e88a2929d64d74f71479":s.bind(null,"849ade5571ba8daf5502e88a2929d64d74f71479"),"8a217c6e79090ba30f40bfb72d31e76126e6f9b2":s.bind(null,"8a217c6e79090ba30f40bfb72d31e76126e6f9b2"),bd43625aad347b7af89e62648689fcb15c113708:s.bind(null,"bd43625aad347b7af89e62648689fcb15c113708")}},10752:(e,t,i)=>{"use strict";i.r(t),i.d(t,{createBooking:()=>u,deleteBooking:()=>l,signInAction:()=>f,signOutAction:()=>p,updateBooking:()=>b,updateGuest:()=>d});var r=i(31542);i(68616);var s=i(42735),a=i(66563),o=i(61024),n=i(66864),c=i(867);async function d(e){let t=await (0,s.I8)();if(!t)throw Error("You must be logged in");let i=e.get("nationalID"),[r,a]=e.get("nationality").split("%");if(!/^[a-zA-Z0-9]{6,12}$/.test(i))throw Error("Please provide a valid national ID");let{data:c,error:d}=await o.O.from("guests").update({nationality:r,countryFlag:a,nationalID:i}).eq("id",t.user.guestId);if(d)throw Error("Guest could not be updated");(0,n.revalidatePath)("/account/profile")}async function u(e,t){let i=await (0,s.I8)();if(!i)throw Error("You must be logged in");let r={...e,guestId:i.user.guestId,numGuests:Number(t.get("numGuests")),observations:t.get("observations").slice(0,1e3),extrasPrice:0,totalPrice:e.cabinPrice,isPaid:!1,hasBreakfast:!1,status:"unconfirmed"},{error:a}=await o.O.from("bookings").insert([r]);if(a)throw Error("Booking could not be created");(0,n.revalidatePath)(`/cabins/${e.cabinId}`),(0,c.redirect)("/cabins/thankyou")}async function l(e){let t=await (0,s.I8)();if(!t)throw Error("You must be logged in");if(!(await (0,a.aL)(t.user.guestId)).map(e=>e.id).includes(e))throw Error("You are not allowed to delete this booking");let{error:i}=await o.O.from("bookings").delete().eq("id",e);if(i)throw Error("Booking could not be deleted");(0,n.revalidatePath)("/account/reservations")}async function b(e){let t=Number(e.get("bookingId")),i=await (0,s.I8)();if(!i)throw Error("You must be logged in");if(!(await (0,a.aL)(i.user.guestId)).map(e=>e.id).includes(t))throw Error("You are not allowed to update this booking");let r={numGuests:Number(e.get("numGuests")),observations:e.get("observations").slice(0,1e3)},{error:d}=await o.O.from("bookings").update(r).eq("id",t).select().single();if(d)throw Error("Booking could not be updated");(0,n.revalidatePath)(`/account/reservations/edit/${t}`),(0,n.revalidatePath)("/account/reservations"),(0,c.redirect)("/account/reservations")}async function f(){await (0,s.zB)("google",{redirectTo:"/account"})}async function p(){await (0,s.w7)({redirectTo:"/"})}(0,i(42053).h)([d,u,l,b,f,p]),(0,r.j)("7f6b87b34fc5114546c6033bf26a784f78c518f4",d),(0,r.j)("52ec01a533020938bc4860eb0e0af7b9239435c0",u),(0,r.j)("8a217c6e79090ba30f40bfb72d31e76126e6f9b2",l),(0,r.j)("1530feff8e7932d9f473cd600032b030ff38219e",b),(0,r.j)("849ade5571ba8daf5502e88a2929d64d74f71479",f),(0,r.j)("bd43625aad347b7af89e62648689fcb15c113708",p)},29925:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n,metadata:()=>o});var r=i(25036),s=i(10752);let a=function(){return r.jsx("form",{action:s.signInAction,children:(0,r.jsxs)("button",{className:"flex items-center gap-6 text-lg border border-primary-300 px-10 py-4 font-medium",children:[r.jsx("img",{src:"https://authjs.dev/img/providers/google.svg",alt:"Google logo",height:"24",width:"24"}),r.jsx("span",{children:"Continue with Google"})]})})},o={title:"Login"};function n(){return(0,r.jsxs)("div",{className:"flex flex-col gap-10 mt-10 items-center",children:[r.jsx("h2",{className:"text-3xl font-semibold",children:"Sign in to access your guest area"}),r.jsx(a,{})]})}}};var t=require("../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),r=t.X(0,[638,548,85,225,864,222,781],()=>i(58425));module.exports=r})();